<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/static/main.css" rel="stylesheet">
  <link href="/static/animations.css" rel="stylesheet">
  <title>Timeline</title>
</head>

<body>
  <div id="vue-app">
    <div class="w-screen h-screen flex flex-col">
      <div id="timeline" class="w-full flex-grow flex items-center overflow-x-scroll">
        <div v-for="(card, index) in timeline" class="flex py-10" @drop="cardDropped" @dragover="cardDraggedOver"
          @dragleave="cardDragLeft">
          <div>
            <div class="relative h-56 w-40 transform transition duration-150" v-bind:class="{
              'translate-x-44': dropPlaceholderIndex !== null && dropPlaceholderIndex <= index,
              'ml-32': index === 0,
              'ml-2': index !== 0,
              'mr-2': index !== (timeline.length - 1),
              'mr-32': index === (timeline.length - 1),
              'transition-none': !timelineTransitionsEnabled,
            }">
              <div
                class="absolute w-full h-full flex items-center border-2 rounded-md border-gray-300 transform transition flippable"
                v-bind:class="{
                'flipped': flippedIndices.includes(index),
              }">
                <span class="w-full p-4 text-center text-gray-400 text-3xl">{{card.frontValue}}</span>
              </div>
              <div
                class="absolute w-full h-full flex items-center border-2 rounded-md border-gray-300 transform transition flippable"
                v-bind:class="{ 
                  'flipped': !flippedIndices.includes(index),
                  'border-red-300': index === justDroppedInfo?.index && justDroppedInfo?.isCorrect === false,
                  'border-green-300': index === justDroppedInfo?.index && justDroppedInfo?.isCorrect === true,
                }">
                <span class="w-full p-4 text-center text-gray-400 text-3xl">{{card.backValue}}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="w-full py-4 bg-gray-50">
        <div class="w-full flex flex-row justify-center space-x-4">
          <div v-for="(card, index) in hand">
            <div draggable="true" @dragstart="cardDragStarted($event, index)"
              class="h-56 w-40 flex items-center border-2 rounded-md border-gray-300">
              <span class="w-full p-4 text-center text-gray-400 text-3xl">{{card.frontValue}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SocketIO -->
  <script src="https://cdn.socket.io/4.3.2/socket.io.min.js"
    integrity="sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs"
    crossorigin="anonymous"></script>
  <!-- VueJS -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <!-- Application Javascript -->
  <script src="/static/game.js"></script>
</body>

</html>